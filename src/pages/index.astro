---
import Layout from '../layouts/Layout.astro'
import Leaderboard from '../components/Leaderboard.svelte'
import ScoringBreakdown from '../components/ScoringBreakdown/index.svelte'
import TopScorersOverall from '../components/TopScorersOverall.svelte'
import TeamBreakdown from '../components/TeamBreakdown.svelte'
import getParticipantScores from '../stats/participantScores'
import getGameStats from '../stats/gameStats'

const participantScores = await getParticipantScores()
const gameStats = await getGameStats()
---

<Layout title="Scoring Pool">
  <main>
    <h1>NBA Playoffs 2024 Scoring Pool</h1>

    <p>
      These stats should update every 10 minutes or so. You need to refresh your
      page for the stats to update.
    </p>

    <Leaderboard participantScores={participantScores} />
    <ScoringBreakdown client:only="svelte" gameStats={gameStats} />
    <TopScorersOverall client:load gameStats={gameStats} />
    <TeamBreakdown client:load gameStats={gameStats} />
  </main>
</Layout>
